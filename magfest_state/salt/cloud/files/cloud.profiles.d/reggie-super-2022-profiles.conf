{#-
  NOTE: Changes to this file must be applied with the following command
  before they take effect:

    salt mcp.magfest.net state.sls salt.cloud.manager
-#}

super-2022-base-prod:
  provider: digitalocean
  image: ubuntu-18-04-x64
  location: nyc1
  private_networking: True
  script_args: -x python2.7
  tags:
    - production
    - reggie
  minion:
    grains:
      env: prod
      event_name: super
      event_year: 2022

super-2022-prod-loadbalancer:
  extends: super-2022-base-prod
  size: c-2
  minion:
    grains:
      roles:
        - reggie
        - loadbalancer

super-2022-prod-web:
  extends: super-2022-base-prod
  size: c-2
  minion:
    grains:
      roles:
        - reggie
        - web

super-2022-prod-sessions:
  extends: super-2022-base-prod
  size: s-2vcpu-2gb
  minion:
    grains:
      roles:
        - reggie
        - sessions

super-2022-prod-db:
  extends: super-2022-base-prod
  size: c-4
  minion:
    grains:
      roles:
        - reggie
        - db

super-2022-prod-queue:
  extends: super-2022-base-prod
  size: s-2vcpu-2gb
  minion:
    grains:
      roles:
        - reggie
        - queue
        - files

super-2022-prod-scheduler:
  extends: super-2022-base-prod
  size: s-2vcpu-2gb
  minion:
    grains:
      roles:
        - reggie
        - scheduler
        - files

super-2022-prod-worker:
  extends: super-2022-base-prod
  size: s-2vcpu-2gb
  minion:
    grains:
      roles:
        - reggie
        - worker
        - files
